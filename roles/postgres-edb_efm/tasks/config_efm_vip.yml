---
- name: configure vip in efm.properties
  lineinfile:
    path: /etc/edb/efm-3.10/efm.properties
    regexp: "{{item.From}}"
    line: "{{item.To}}"
  with_items:
    - { From: 'virtual.ip=', To: 'virtual.ip={{ EFM_VIP }}' }
    - { From: 'virtual.ip.interface=', To: 'virtual.ip.interface=eth1' }
    - { From: 'virtual.ip.prefix=', To: 'virtual.ip.prefix=24' } 
  notify: restart efm
  when: EFM_VIP is defined
